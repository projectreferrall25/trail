<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Account Manager</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      /* Primitive Color Tokens */
      --color-white: rgba(255, 255, 255, 1);
      --color-black: rgba(0, 0, 0, 1);
      --color-cream-50: rgba(252, 252, 249, 1);
      --color-cream-100: rgba(255, 255, 253, 1);
      --color-gray-200: rgba(245, 245, 245, 1);
      --color-gray-300: rgba(167, 169, 169, 1);
      --color-gray-400: rgba(119, 124, 124, 1);
      --color-slate-500: rgba(98, 108, 113, 1);
      --color-brown-600: rgba(94, 82, 64, 1);
      --color-charcoal-700: rgba(31, 33, 33, 1);
      --color-charcoal-800: rgba(38, 40, 40, 1);
      --color-slate-900: rgba(19, 52, 59, 1);
      --color-teal-300: rgba(50, 184, 198, 1);
      --color-teal-400: rgba(45, 166, 178, 1);
      --color-teal-500: rgba(33, 128, 141, 1);
      --color-teal-600: rgba(29, 116, 128, 1);
      --color-teal-700: rgba(26, 104, 115, 1);
      --color-teal-800: rgba(41, 150, 161, 1);
      --color-red-400: rgba(255, 84, 89, 1);
      --color-red-500: rgba(192, 21, 47, 1);
      --color-orange-400: rgba(230, 129, 97, 1);
      --color-orange-500: rgba(168, 75, 47, 1);

      /* RGB versions for opacity control */
      --color-brown-600-rgb: 94, 82, 64;
      --color-teal-500-rgb: 33, 128, 141;
      --color-slate-900-rgb: 19, 52, 59;
      --color-slate-500-rgb: 98, 108, 113;
      --color-red-500-rgb: 192, 21, 47;
      --color-red-400-rgb: 255, 84, 89;
      --color-orange-500-rgb: 168, 75, 47;
      --color-orange-400-rgb: 230, 129, 97;

      /* Background color tokens (Light Mode) */
      --color-bg-1: rgba(59, 130, 246, 0.08);
      --color-bg-2: rgba(245, 158, 11, 0.08);
      --color-bg-3: rgba(34, 197, 94, 0.08);
      --color-bg-4: rgba(239, 68, 68, 0.08);
      --color-bg-5: rgba(147, 51, 234, 0.08);
      --color-bg-6: rgba(249, 115, 22, 0.08);
      --color-bg-7: rgba(236, 72, 153, 0.08);
      --color-bg-8: rgba(6, 182, 212, 0.08);

      /* Semantic Color Tokens (Light Mode) */
      --color-background: var(--color-cream-50);
      --color-surface: var(--color-cream-100);
      --color-text: var(--color-slate-900);
      --color-text-secondary: var(--color-slate-500);
      --color-primary: var(--color-teal-500);
      --color-primary-hover: var(--color-teal-600);
      --color-primary-active: var(--color-teal-700);
      --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
      --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
      --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
      --color-border: rgba(var(--color-brown-600-rgb), 0.2);
      --color-btn-primary-text: var(--color-cream-50);
      --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
      --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
      --color-error: var(--color-red-500);
      --color-success: var(--color-teal-500);
      --color-warning: var(--color-orange-500);
      --color-info: var(--color-slate-500);
      --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
      --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

      /* Common style patterns */
      --focus-ring: 0 0 0 3px var(--color-focus-ring);
      --focus-outline: 2px solid var(--color-primary);

      /* Typography */
      --font-family-base: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      --font-size-sm: 12px;
      --font-size-base: 14px;
      --font-size-md: 14px;
      --font-size-lg: 16px;
      --font-size-xl: 18px;
      --font-size-2xl: 20px;
      --font-size-3xl: 24px;
      --font-size-4xl: 30px;
      --font-weight-normal: 400;
      --font-weight-medium: 500;
      --font-weight-semibold: 550;
      --font-weight-bold: 600;
      --line-height-tight: 1.2;
      --line-height-normal: 1.5;
      --letter-spacing-tight: -0.01em;

      /* Spacing */
      --space-4: 4px;
      --space-6: 6px;
      --space-8: 8px;
      --space-12: 12px;
      --space-16: 16px;
      --space-20: 20px;
      --space-24: 24px;
      --space-32: 32px;

      /* Border Radius */
      --radius-sm: 6px;
      --radius-base: 8px;
      --radius-md: 10px;
      --radius-lg: 12px;
      --radius-full: 9999px;

      /* Shadows */
      --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04), 0 2px 4px -1px rgba(0, 0, 0, 0.02);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04), 0 4px 6px -2px rgba(0, 0, 0, 0.02);

      /* Animation */
      --duration-fast: 150ms;
      --duration-normal: 250ms;
      --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --color-gray-400-rgb: 119, 124, 124;
        --color-teal-300-rgb: 50, 184, 198;
        --color-gray-300-rgb: 167, 169, 169;
        --color-gray-200-rgb: 245, 245, 245;

        --color-bg-1: rgba(29, 78, 216, 0.15);
        --color-bg-2: rgba(180, 83, 9, 0.15);
        --color-bg-3: rgba(21, 128, 61, 0.15);
        --color-bg-4: rgba(185, 28, 28, 0.15);
        --color-bg-5: rgba(107, 33, 168, 0.15);
        --color-bg-6: rgba(194, 65, 12, 0.15);
        --color-bg-7: rgba(190, 24, 93, 0.15);
        --color-bg-8: rgba(8, 145, 178, 0.15);

        --color-background: var(--color-charcoal-700);
        --color-surface: var(--color-charcoal-800);
        --color-text: var(--color-gray-200);
        --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
        --color-primary: var(--color-teal-300);
        --color-primary-hover: var(--color-teal-400);
        --color-primary-active: var(--color-teal-800);
        --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
        --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
        --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
        --color-border: rgba(var(--color-gray-400-rgb), 0.3);
        --color-error: var(--color-red-400);
        --color-success: var(--color-teal-300);
        --color-warning: var(--color-orange-400);
        --color-info: var(--color-gray-300);
        --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
        --color-btn-primary-text: var(--color-slate-900);
        --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
        --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
      }
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-family-base);
      background-color: var(--color-background);
      color: var(--color-text);
      line-height: var(--line-height-normal);
      font-size: var(--font-size-base);
      padding: var(--space-24);
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .header {
      margin-bottom: var(--space-32);
    }

    /* Parallel Grid Layout - 20:80 Ratio */
    .main-grid {
      display: grid;
      grid-template-columns: 1fr 4fr;
      gap: var(--space-32);
      align-items: start;
    }

    .left-section {
      position: sticky;
      top: var(--space-24);
      height: fit-content;
    }

    .right-section {
      min-height: 400px;
    }

    h1 {
      font-size: var(--font-size-4xl);
      font-weight: var(--font-weight-bold);
      margin-bottom: var(--space-8);
      letter-spacing: var(--letter-spacing-tight);
      background: linear-gradient(135deg, #00D4FF 0%, #6366F1 50%, #8B5CF6 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      color: #E8F0FE;
      margin-bottom: var(--space-32);
      font-size: var(--font-size-lg);
    }

    /* Form Styles */
    .form-section {
      background: var(--color-surface);
      border: 1px solid var(--color-card-border);
      border-radius: var(--radius-lg);
      padding: var(--space-24);
      box-shadow: var(--shadow-sm);
    }

    .form-section h2 {
      font-size: var(--font-size-2xl);
      font-weight: var(--font-weight-semibold);
      margin-bottom: var(--space-20);
      color: #00D4FF;
    }

    .form-grid {
      display: flex;
      flex-direction: column;
      gap: var(--space-16);
      margin-bottom: var(--space-20);
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group label {
      font-weight: var(--font-weight-medium);
      margin-bottom: var(--space-8);
      font-size: var(--font-size-sm);
      color: #00D4FF;
    }

    .form-group input {
      padding: var(--space-12);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-base);
      font-size: var(--font-size-base);
      background: var(--color-background);
      color: var(--color-text);
      transition: border-color var(--duration-fast) var(--ease-standard);
    }

    .form-group input:focus {
      outline: none;
      border-color: var(--color-primary);
      box-shadow: var(--focus-ring);
    }

    .btn {
      padding: var(--space-12) var(--space-24);
      border: none;
      border-radius: var(--radius-base);
      font-size: var(--font-size-base);
      font-weight: var(--font-weight-medium);
      cursor: pointer;
      transition: all var(--duration-normal) var(--ease-standard);
    }

    .btn-primary {
      background: linear-gradient(135deg, #6366F1 0%, #8B5CF6 100%);
      color: #FFFFFF;
    }

    .btn-primary:hover {
      background: linear-gradient(135deg, #4F46E5 0%, #7C3AED 100%);
    }

    .btn-primary:active {
      background: var(--color-primary-active);
    }

    .btn-secondary {
      background: var(--color-secondary);
      color: #E8F0FE;
    }

    .btn-secondary:hover {
      background: var(--color-secondary-hover);
    }

    .btn-danger {
      background: #EF4444;
      color: #FFFFFF;
    }

    .btn-danger:hover {
      opacity: 0.9;
    }

    /* Accounts Grid */
    .accounts-section {
      /* No top margin needed in grid layout */
    }

    .accounts-section h2 {
      font-size: var(--font-size-2xl);
      font-weight: var(--font-weight-semibold);
      margin-bottom: var(--space-20);
      color: #00D4FF;
    }

    .accounts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: var(--space-20);
    }

    .account-card {
      background: var(--color-surface);
      border: 1px solid var(--color-card-border);
      border-radius: var(--radius-lg);
      padding: var(--space-24);
      cursor: pointer;
      transition: all var(--duration-normal) var(--ease-standard);
      box-shadow: var(--shadow-sm);
    }

    .account-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
      border-color: var(--color-primary);
    }

    .account-icon {
      font-size: 48px;
      color: #00D4FF;
      margin-bottom: var(--space-16);
      display: flex;
      align-items: center;
      justify-content: center;
      height: 60px;
    }

    .account-name {
      font-size: var(--font-size-xl);
      font-weight: var(--font-weight-semibold);
      margin-bottom: var(--space-8);
      background: linear-gradient(135deg, #00D4FF 0%, #6366F1 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .account-url {
      color: #E8F0FE;
      font-size: var(--font-size-sm);
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    /* Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      padding: var(--space-20);
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal {
      background: var(--color-surface);
      border-radius: var(--radius-lg);
      padding: var(--space-32);
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: var(--shadow-lg);
      position: relative;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-24);
      padding-bottom: var(--space-16);
      border-bottom: 1px solid var(--color-card-border-inner);
    }

    .modal-header h3 {
      font-size: var(--font-size-2xl);
      font-weight: var(--font-weight-semibold);
      background: linear-gradient(135deg, #00D4FF 0%, #6366F1 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: var(--color-text-secondary);
      padding: var(--space-4);
      line-height: 1;
      transition: color var(--duration-fast) var(--ease-standard);
    }

    .close-btn:hover {
      color: var(--color-text);
    }

    .modal-body {
      margin-bottom: var(--space-24);
    }

    .detail-group {
      margin-bottom: var(--space-20);
    }

    .detail-label {
      font-weight: var(--font-weight-medium);
      font-size: var(--font-size-sm);
      color: #06B6D4;
      margin-bottom: var(--space-8);
    }

    .detail-value {
      font-size: var(--font-size-base);
      color: var(--color-text);
      padding: var(--space-12);
      background: var(--color-background);
      border-radius: var(--radius-base);
      border: 1px solid var(--color-border);
      word-break: break-all;
    }

    .detail-value.editable {
      cursor: text;
    }

    .password-field {
      display: flex;
      gap: var(--space-8);
      align-items: center;
    }

    .password-field .detail-value {
      flex: 1;
    }

    .toggle-password {
      padding: var(--space-8) var(--space-12);
      background: var(--color-secondary);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-base);
      cursor: pointer;
      font-size: var(--font-size-sm);
      color: var(--color-text);
      transition: background var(--duration-fast) var(--ease-standard);
    }

    .toggle-password:hover {
      background: var(--color-secondary-hover);
    }

    .modal-footer {
      display: flex;
      gap: var(--space-12);
      justify-content: flex-end;
      padding-top: var(--space-16);
      border-top: 1px solid var(--color-card-border-inner);
    }

    .edit-mode .detail-value {
      background: var(--color-surface);
      border-color: var(--color-primary);
    }

    .empty-state {
      text-align: center;
      padding: var(--space-32) var(--space-16);
      color: #E8F0FE;
    }

    .empty-state i {
      font-size: 64px;
      margin-bottom: var(--space-16);
      color: #00D4FF;
      opacity: 0.5;
    }

    /* Tablet Layout */
    @media (max-width: 1199px) and (min-width: 768px) {
      .accounts-grid {
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      }
    }

    /* Mobile Layout - Stack Vertically */
    @media (max-width: 767px) {
      body {
        padding: var(--space-16);
      }

      .main-grid {
        grid-template-columns: 1fr;
        gap: var(--space-24);
      }

      .left-section {
        position: static;
      }

      .accounts-grid {
        grid-template-columns: 1fr;
      }

      .modal {
        padding: var(--space-20);
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Account Manager</h1>
      <p class="subtitle">Securely manage your account credentials</p>
    </div>

    <div class="main-grid">
      <!-- LEFT SECTION: Account Entry Form -->
      <div class="left-section">
        <div class="form-section">
          <h2>Add Account</h2>
          <form id="accountForm">
            <div class="form-grid">
              <div class="form-group">
                <label for="accountName">Account Name *</label>
                <input type="text" id="accountName" required placeholder="e.g., Google, GitHub">
              </div>
              <div class="form-group">
                <label for="accountUrl">URL</label>
                <input type="url" id="accountUrl" placeholder="https://example.com">
              </div>
              <div class="form-group">
                <label for="userId">User ID *</label>
                <input type="text" id="userId" required placeholder="username or email">
              </div>
              <div class="form-group">
                <label for="password">Password *</label>
                <!--<input type="password" id="password" required placeholder="••••••••"> -->
                <input type="text" id="password" required placeholder="Enter your password">
              </div>
              <div class="form-group">
                <label for="createdDate">Created Date *</label>
                <input type="date" id="createdDate" required>
              </div>
            </div>
            <button type="submit" class="btn btn-primary" style="width: 100%;">Add Account</button>
          </form>
        </div>
      </div>

      <!-- RIGHT SECTION: Accounts Display -->
      <div class="right-section">
        <div class="accounts-section">
          <h2>Accounts</h2>
          <div id="accountsGrid" class="accounts-grid">
            <!-- Account cards will be dynamically inserted here -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal for Account Details -->
  <div id="modalOverlay" class="modal-overlay">
    <div class="modal">
      <div class="modal-header">
        <h3 id="modalTitle">Account Details</h3>
        <button class="close-btn" onclick="closeModal()">&times;</button>
      </div>
      <div class="modal-body" id="modalBody">
        <!-- Details will be dynamically inserted here -->
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" id="deleteBtn" onclick="deleteAccount()">Delete</button>
        <button class="btn btn-secondary" id="editBtn" onclick="toggleEdit()">Edit</button>
        <button class="btn btn-primary" id="saveBtn" onclick="saveEdit()" style="display: none;">Save</button>
        <button class="btn btn-secondary" id="cancelBtn" onclick="cancelEdit()" style="display: none;">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    // In-memory storage for accounts
    // NOTE: For production deployment on Vercel, you can use persistent storage
    let accounts = [
      {
        id: Date.now() + 1,
        accountName: 'Google',
        url: 'https://google.com',
        userId: 'user@gmail.com',
        password: 'example123',
        createdDate: '2024-01-15',
        icon: 'fab fa-google'
      },
      {
        id: Date.now() + 2,
        accountName: 'Microsoft',
        url: 'https://microsoft.com',
        userId: 'user@outlook.com',
        password: 'secure456',
        createdDate: '2024-02-20',
        icon: 'fab fa-microsoft'
      },
      {
        id: Date.now() + 3,
        accountName: 'GitHub',
        url: 'https://github.com',
        userId: 'developer123',
        password: 'code789',
        createdDate: '2024-03-10',
        icon: 'fab fa-github'
      }
    ];

    let currentAccount = null;
    let isEditMode = false;
    let originalData = null;

    // Icon mapping for common services
    const iconMap = {
      'google': 'fab fa-google',
      'microsoft': 'fab fa-microsoft',
      'mongodb': 'fas fa-database',
      'github': 'fab fa-github',
      'aws': 'fab fa-aws',
      'amazon': 'fab fa-aws',
      'facebook': 'fab fa-facebook',
      'twitter': 'fab fa-twitter',
      'linkedin': 'fab fa-linkedin',
      'instagram': 'fab fa-instagram',
      'apple': 'fab fa-apple',
      'dropbox': 'fab fa-dropbox',
      'slack': 'fab fa-slack',
      'spotify': 'fab fa-spotify',
      'youtube': 'fab fa-youtube',
      'reddit': 'fab fa-reddit',
      'default': 'fas fa-user-circle'
    };

    // Get icon based on account name
    function getIcon(accountName) {
      const name = accountName.toLowerCase();
      for (const [key, value] of Object.entries(iconMap)) {
        if (name.includes(key)) {
          return value;
        }
      }
      return iconMap.default;
    }

    // Save accounts to storage
    function saveAccounts() {
      // For production on Vercel, add persistent storage here
      // In-memory storage (no action needed for preview)
    }

    // Set today's date as default
    document.getElementById('createdDate').valueAsDate = new Date();

    // Handle form submission
    document.getElementById('accountForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const newAccount = {
        id: Date.now(),
        accountName: document.getElementById('accountName').value,
        url: document.getElementById('accountUrl').value,
        userId: document.getElementById('userId').value,
        password: document.getElementById('password').value,
        createdDate: document.getElementById('createdDate').value,
        icon: getIcon(document.getElementById('accountName').value)
      };

      accounts.push(newAccount);
      saveAccounts();
      renderAccounts();
      
      // Reset form
      this.reset();
      document.getElementById('createdDate').valueAsDate = new Date();
    });

    // Render all accounts
    function renderAccounts() {
      const grid = document.getElementById('accountsGrid');
      
      if (accounts.length === 0) {
        grid.innerHTML = `
          <div class="empty-state">
            <i class="fas fa-folder-open"></i>
            <p>No accounts yet. Add your first account using the form above.</p>
          </div>
        `;
        return;
      }

      grid.innerHTML = accounts.map(account => `
        <div class="account-card" onclick="openModal(${account.id})">
          <div class="account-icon">
            <i class="${account.icon}"></i>
          </div>
          <div class="account-name">${escapeHtml(account.accountName)}</div>
          <div class="account-url">${escapeHtml(account.url)}</div>
        </div>
      `).join('');
    }

    // Escape HTML to prevent XSS
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // Open modal with account details
    function openModal(accountId) {
      currentAccount = accounts.find(acc => acc.id === accountId);
      if (!currentAccount) return;

      isEditMode = false;
      document.getElementById('modalTitle').textContent = currentAccount.accountName;
      
      const modalBody = document.getElementById('modalBody');
      modalBody.innerHTML = `
        <div class="detail-group">
          <div class="detail-label">Account Name</div>
          <div class="detail-value" data-field="accountName">${escapeHtml(currentAccount.accountName)}</div>
        </div>
        <div class="detail-group">
          <div class="detail-label">URL</div>
          <div class="detail-value" data-field="url">${escapeHtml(currentAccount.url)}</div>
        </div>
        <div class="detail-group">
          <div class="detail-label">User ID</div>
          <div class="detail-value" data-field="userId">${escapeHtml(currentAccount.userId)}</div>
        </div>
        <div class="detail-group">
          <div class="detail-label">Password</div>
          <div class="password-field">
            <div class="detail-value" data-field="password" id="passwordValue">••••••••</div>
            <button class="toggle-password" onclick="togglePassword(event)">Show</button>
          </div>
        </div>
        <div class="detail-group">
          <div class="detail-label">Created Date</div>
          <div class="detail-value" data-field="createdDate">${escapeHtml(currentAccount.createdDate)}</div>
        </div>
      `;

      document.getElementById('modalOverlay').classList.add('active');
      updateModalButtons();
    }

    // Close modal
    function closeModal() {
      if (isEditMode) {
        if (confirm('You have unsaved changes. Are you sure you want to close?')) {
          cancelEdit();
          document.getElementById('modalOverlay').classList.remove('active');
        }
      } else {
        document.getElementById('modalOverlay').classList.remove('active');
      }
      currentAccount = null;
    }

    // Toggle password visibility
    function togglePassword(event) {
      event.stopPropagation();
      const passwordField = document.getElementById('passwordValue');
      const button = event.target;
      
      if (button.textContent === 'Show') {
        passwordField.textContent = currentAccount.password;
        button.textContent = 'Hide';
      } else {
        passwordField.textContent = '••••••••';
        button.textContent = 'Show';
      }
    }

    // Toggle edit mode
    function toggleEdit() {
      isEditMode = true;
      originalData = { ...currentAccount };
      
      const modal = document.querySelector('.modal');
      modal.classList.add('edit-mode');
      
      const fields = modal.querySelectorAll('.detail-value');
      fields.forEach(field => {
        const fieldName = field.getAttribute('data-field');
        if (fieldName && fieldName !== 'password') {
          const currentValue = currentAccount[fieldName];
          field.contentEditable = true;
          field.classList.add('editable');
          field.textContent = currentValue;
        }
      });

      // Make password field editable
      const passwordField = document.getElementById('passwordValue');
      passwordField.contentEditable = true;
      passwordField.classList.add('editable');
      passwordField.textContent = currentAccount.password;

      updateModalButtons();
    }

    // Save edit
    function saveEdit() {
      const modal = document.querySelector('.modal');
      const fields = modal.querySelectorAll('.detail-value');
      
      fields.forEach(field => {
        const fieldName = field.getAttribute('data-field');
        if (fieldName) {
          currentAccount[fieldName] = field.textContent.trim();
        }
      });

      // Update icon if account name changed
      currentAccount.icon = getIcon(currentAccount.accountName);

      // Find and update the account in the array
      const index = accounts.findIndex(acc => acc.id === currentAccount.id);
      if (index !== -1) {
        accounts[index] = currentAccount;
      }

      saveAccounts();
      renderAccounts();
      
      isEditMode = false;
      modal.classList.remove('edit-mode');
      
      fields.forEach(field => {
        field.contentEditable = false;
        field.classList.remove('editable');
      });

      // Hide password again
      const passwordField = document.getElementById('passwordValue');
      passwordField.textContent = '••••••••';
      document.querySelector('.toggle-password').textContent = 'Show';

      updateModalButtons();
    }

    // Cancel edit
    function cancelEdit() {
      if (originalData) {
        currentAccount = { ...originalData };
        originalData = null;
      }
      
      isEditMode = false;
      const modal = document.querySelector('.modal');
      modal.classList.remove('edit-mode');
      
      // Re-render the modal with original data
      openModal(currentAccount.id);
    }

    // Delete account
    function deleteAccount() {
      if (confirm(`Are you sure you want to delete the account "${currentAccount.accountName}"?`)) {
        accounts = accounts.filter(acc => acc.id !== currentAccount.id);
        saveAccounts();
        renderAccounts();
        closeModal();
      }
    }

    // Update modal button visibility
    function updateModalButtons() {
      const editBtn = document.getElementById('editBtn');
      const saveBtn = document.getElementById('saveBtn');
      const cancelBtn = document.getElementById('cancelBtn');
      const deleteBtn = document.getElementById('deleteBtn');

      if (isEditMode) {
        editBtn.style.display = 'none';
        deleteBtn.style.display = 'none';
        saveBtn.style.display = 'inline-block';
        cancelBtn.style.display = 'inline-block';
      } else {
        editBtn.style.display = 'inline-block';
        deleteBtn.style.display = 'inline-block';
        saveBtn.style.display = 'none';
        cancelBtn.style.display = 'none';
      }
    }

    // Close modal when clicking outside
    document.getElementById('modalOverlay').addEventListener('click', function(e) {
      if (e.target === this) {
        closeModal();
      }
    });

    // Initial render
    renderAccounts();
  </script>
</body>
</html>